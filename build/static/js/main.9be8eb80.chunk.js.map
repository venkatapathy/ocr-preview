{"version":3,"sources":["reducer/types.ts","reducerContext.ts","reducer/index.js","utils.ts","reducer/actions.ts","lib/doOcr.ts","components/PageView/ToolBar.tsx","components/PageView/ImageView.tsx","components/PageView/components/HocrLayer.tsx","components/PageView/HocrView.tsx","components/PageView/PageView.tsx","components/BooksCatalog.tsx","components/SearchPage.tsx","App.tsx","reportWebVitals.js","index.tsx"],"names":["ActionType","createReducerContext","state","action","type","ChangeCurPage","produce","draft","curPageno","payload","LogInfo","logInfo","LoadImage","pageImage","LoadHocr","hocrPage","SetHoverId","hoverId","model","useAppReducer","AppReducerProvider","loadImageUtil","blob","a","createImageBitmap","img","curWidth","width","curHeight","height","urlObject","URL","createObjectURL","orgWidth","orgHeight","changeCurPage","createAction","setHoverId","loadImage","loadHocr","assertClassName","className","expected","Array","isArray","assert","some","val","JSON","stringify","parseAttrBbox","title","matches","match","Error","x0","y0","x1","y1","parseNumberAttribute","name","RegExp","parseFloat","parseAttrWordSize","parseAttrConfidence","parseAttrLineSize","parseWord","element","getAttribute","id","bbox","size","confidence","language","text","textContent","parseLine","children","from","map","doOcr","hocrurl","fetch","then","r","console","log","doc","p","querySelector","lineel","querySelectorAll","parsePage","DOMParser","parseFromString","error","ToolBar","dispatch","fnSetCurZoom","parsed","queryString","parse","window","location","search","imageurl","process","b","handleChange","e","includes","page","catch","useEffect","xmlns","fill","viewBox","d","onClick","parseInt","value","onChange","fillRule","ImageView","image","oldProps","this","props","removeEventListener","handleLoad","Image","src","ref","node","imageNode","React","Component","HocrLayer","layerRectRefs","useRef","handleHover","thoverId","RenderWrdFunction","wordarray","sortArray","by","order","computed","area","word","lineChild","el","current","x","y","stroke","strokeEnabled","onMouseEnter","target","attrs","onMouseLeave","linesEl","Fragment","HocrView","useState","RenderWord","wordChild","PageViewer","curZoom","setCurZoom","setBookDetails","useMeasure","imgMeasureRef","axios","get","response","data","Navbar","bg","variant","Container","Nav","Link","href","zoomDelta","BooksCatalog","show","setShow","showAlert","setShowAlert","inputValues","setInputValues","onlineBookList","setOnlineBookList","alertMessage","setAlertMessage","form","handleClose","refreshBookList","er","msg","trItem","bookItem","index","author","category","to","_id","$uuid","handleInputChange","event","checked","shallow","Object","assign","Modal","onHide","animation","Header","Title","Body","Form","onSubmit","preventDefault","frmData","FormData","post","headers","Group","Label","Control","placeholder","as","File","Button","Alert","onClose","dismissible","Footer","scope","colSpan","SearchPage","setSearchQuery","searchResults","setSearchResults","searchResultsDiv","docs","bookuuid","pageno","rel","dangerouslySetInnerHTML","__html","pagecontent","refreshSearchResults","qvalue","queryURL","onKeyDown","key","numFound","responseHeader","QTime","App","split","length","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9be8eb80.chunk.js","sourcesContent":["import PageImageInfo from \"../types\";\nimport HocrPage from \"../types\";\nimport * as actions from \"./actions\";\n\nexport interface State {\n\tpageImage: PageImageInfo;\n\tmodel: string;\n\thocrPage: HocrPage;\n\thoverId: string;\n\tcurZoom: int;\n\tlogInfo: string;\n\tcurPageno: int;\n}\n\nexport enum ActionType {\n\tLoadImage = \"LoadImage\",\n\tLoadHocr = \"LoadHocr\",\n\tSetHoverId = \"SetHoverId\",\n\tLogInfo = \"LogInfo\",\n\tChangeCurPage = \"ChangeCurPage\",\n}\n\nexport interface ChangeCurPagePayload {\n\tcurPageno: int;\n}\n\nexport interface LogInfoPayload {\n\tlogInfo: string;\n}\n\nexport interface SetHoverIdPayload {\n\thoverId: string;\n}\n\nexport interface LoadImagePayload {\n\tpageImage: PageImageInfo;\n}\n\nexport interface LoadHocrPayload {\n\thocrPage: HocrPage;\n}\n\ntype Actions = typeof actions;\n\nexport type AppReducerAction = ReturnType<Actions[keyof Actions]>;\n","import { createReducerContext } from 'react-use';\n\nimport { reducer, initialState } from './reducer';\n\n\n\nexport const [useAppReducer, AppReducerProvider, AppReducerContext] = createReducerContext(reducer, initialState);\n","import { ActionType, AppReducerAction, State } from \"./types\";\nimport { produce } from \"immer\";\nimport type { Draft } from \"immer/dist/types/types-external\";\n\nexport const initialState: State = {\n\tpageImage: null,\n\tmodel: \"\",\n\thocrPage: null,\n\tlogInfo: \"\",\n\tcurPageno: 1,\n};\n\nexport function reducer(state: State, action: AppReducerAction): State {\n\tswitch (action.type) {\n\t\tcase ActionType.ChangeCurPage: {\n\t\t\treturn produce(state, (draft) => {\n\t\t\t\tdraft.curPageno = action.payload.curPageno;\n\t\t\t});\n\t\t}\n\t\tcase ActionType.LogInfo: {\n\t\t\treturn produce(state, (draft) => {\n\t\t\t\tdraft.logInfo = action.payload.logInfo;\n\t\t\t});\n\t\t}\n\n\t\tcase ActionType.LoadImage: {\n\t\t\treturn produce(state, (draft) => {\n\t\t\t\tdraft.pageImage = action.payload.pageImage;\n\t\t\t});\n\t\t}\n\t\tcase ActionType.LoadHocr: {\n\t\t\treturn produce(state, (draft) => {\n\t\t\t\tdraft.hocrPage = action.payload.hocrPage;\n\t\t\t});\n\t\t}\n\t\tcase ActionType.SetHoverId: {\n\t\t\treturn produce(state, (draft) => {\n\t\t\t\tdraft.hoverId = action.payload.hoverId;\n\t\t\t});\n\t\t}\n\t}\n}\n","import { PageImage } from \"./types\";\n\nexport async function loadImageUtil(blob: Blob): Promise<PageImage | null> {\n\tconst img = await createImageBitmap(blob);\n\n\treturn {\n\t\tcurWidth: img.width,\n\t\tcurHeight: img.height,\n\t\turlObject: URL.createObjectURL(blob),\n\t\torgWidth: img.width,\n\t\torgHeight: img.height,\n\t};\n}\n","import {ActionType, LoadImagePayload, LoadHocrPayload} from \"./types\";\nimport { createAction } from \"@reduxjs/toolkit\";\nimport {PageImageInfo, HocrPage} from \"../types\";\n\nexport const changeCurPage= createAction<(curPageno: int) =>{payload: ChangeCurPagePayLoad},\n\tAction.Type.ChangeCurPage\n>(ActionType.ChangeCurPage, (curPageno) =>({\n\tpayload: {\n\t\tcurPageno,\n\t},\n}));\n\nexport const logInfo= createAction<(logInfo: string) =>{payload: LogInfoPayload},\n\tAction.Type.SetLogInfo\n>(ActionType.LogInfo, (logInfo) => ({\n\tpayload: {\n\t\tlogInfo,\n\t},\n}));\n\nexport const setHoverId = createAction<\n\t(hoverId: string) => {payload: SetHoverIdPayload},\n\tActionType.SetHoverId\n>(ActionType.SetHoverId, (hoverId) => ({\n\tpayload: {\n\t\thoverId,\n\t},\n}));\n\nexport const loadImage = createAction<\n\t(pageImage: PageImageInfo) => { payload: LoadImagePayload },\n\tActionType.LoadImage\n>(ActionType.LoadImage, (pageImage) => ({\n\tpayload: {\n\t\tpageImage,\n\t},\n}));\n\nexport const loadHocr = createAction<\n\t(hocrPage: HocrPage) => { payload: LoadHocrPayload },\n\tActionType.LoadHocr\n>(ActionType.LoadHocr, (hocrPage) => ({\n\tpayload: { hocrPage },\n}));\n","import OcrTextDocument from \"../reducer/types\";\nimport raw from \"../data/out.hocr\";\nimport { Page, Word, Line } from \"../type\";\nimport assert from \"assert\";\nimport axios from \"axios\";\n\n/* Asyncronous funtion to fetch hocr from OCR- Server service and if all good parse them into custom ocrLines for this project.\n * OcrText state gets updated at the end of this function call\n * */\n\nfunction assertClassName(className: string, expected: string | string[]) {\n\tif (Array.isArray(expected)) {\n\t\tassert(\n\t\t\texpected.some((val) => val === className),\n\t\t\t\"Expected element to have class name of one of: %s, received %s.\",\n\t\t\tJSON.stringify(expected),\n\t\t\tclassName\n\t\t);\n\n\t\treturn;\n\t}\n\n\tassert(\n\t\texpected === className,\n\t\t\"Expected element to have class name of %s, received %s.\",\n\t\texpected,\n\t\tclassName\n\t);\n}\n\nfunction parseAttrBbox(title: string): Bbox {\n\tconst matches = title.match(/bbox ([0-9]+) ([0-9]+) ([0-9]+) ([0-9]+)/);\n\n\tif (!matches) {\n\t\tthrow new Error(\"No bbox attribute found in title.\");\n\t}\n\n\treturn {\n\t\tx0: +matches[1],\n\t\ty0: +matches[2],\n\t\tx1: +matches[3],\n\t\ty1: +matches[4],\n\t};\n}\n\nfunction parseNumberAttribute(title: string, name: string): number | null {\n  const matches = title.match(new RegExp(`${name} (-?[0-9]+(?:\\\\.[0-9]+)?)`));\n\n  if (!matches) {\n    return null;\n  }\n\n  return parseFloat(matches[1]);\n}\n\n\nconst parseAttrWordSize = (title: string): number | null =>\n\tparseNumberAttribute(title, \"x_fsize\");\n\nconst parseAttrConfidence = (title: string): number | null =>\n\tparseNumberAttribute(title, \"x_wconf\");\n\nconst parseAttrLineSize = (title: string): number | null =>\n\tparseNumberAttribute(title, \"x_size\");\n\nfunction parseWord(element: Element): Word {\n\tassertClassName(element.className, \"ocrx_word\");\n\n\tconst title = element.getAttribute(\"title\") ?? \"\";\n\n\treturn {\n\t\ttype: \"word\",\n\t\tid: element.getAttribute(\"id\") ?? \"\",\n\t\tbbox: parseAttrBbox(title),\n\t\tsize: parseAttrWordSize(title),\n\t\tconfidence: parseAttrConfidence(title),\n\t\tlanguage: element.getAttribute(\"lang\") ?? \"\",\n\t\ttext: element.textContent ?? \"\",\n\t};\n}\n\nfunction parseLine(element: Element): Line {\n\tassertClassName(element.className, [\n\t\t\"ocr_line\",\n\t\t\"ocr_caption\",\n\t\t\"ocr_textfloat\",\n\t]);\n\n\tconst title = element.getAttribute(\"title\") ?? \"\";\n\n\tlet type: \"line\" | \"caption\" | \"textfloat\" = \"line\";\n\n\tif (element.className === \"ocr_caption\") {\n\t\ttype = \"caption\";\n\t}\n\n\tif (element.className === \"ocr_textfloat\") {\n\t\ttype = \"textfloat\";\n\t}\n\n\treturn {\n\t\ttype,\n\t\tid: element.getAttribute(\"id\") ?? \"\",\n\t\tbbox: parseAttrBbox(title),\n\t\tsize: parseAttrLineSize(title),\n\t\tchildren: Array.from(element.children).map(parseWord),\n\t};\n}\n\nfunction parsePage(doc: Document):Page {\n\tconst p = doc.querySelector(\".ocr_page\");\n\n\tif (!p) {\n\t\tthrow new Error(\n\t\t\t'Could not find an element with class \"ocr_page\".'\n\t\t);\n\t}\n\n\tconst title = p.getAttribute(\"title\") ?? \"\";\n\n\tconst lineel = doc.querySelectorAll(\".ocr_line\");\n\n\tif (!lineel) {\n\t\tthrow new Error(\n\t\t\t'Could not find an element with class \"ocr_line\".'\n\t\t);\n\t}\n\n\treturn {\n\t\ttype: \"page\",\n\t\tid: p.getAttribute(\"id\") ?? \"\",\n\t\ttitle: doc.title,\n\t\tbbox: parseAttrBbox(title),\n\t\tchildren: Array.from(lineel).map(parseLine),\n\t};\n}\n\nexport default function doOcr(hocrurl): Promise<Page> {\n\t//first call the server with image POST and get a hocr text in return( or an error?)\n\t//\n\t\n\n\treturn fetch(hocrurl)\n\t\t.then((r) => r.text())\n\t\t.then((text) => {\n\t\t\tconsole.log(\"Enter2\");\n\t\t\tconst doc = new DOMParser().parseFromString(\n\t\t\t\ttext,\n\t\t\t\t\"text/html\"\n\t\t\t);\n\n\t\t\treturn parsePage(doc);\n\n\t\t},(error) => {\n\t\t\tconsole.log(error);\n\t\t});\n\n\t\n\n}\n","import React, { Dispatch, useEffect } from \"react\";\nimport queryString from \"query-string\";\nimport { loadImageUtil } from \"../../utils\";\nimport {\n\tloadImage,\n\tloadHocr,\n\tlogInfo,\n\tchangeCurPage,\n} from \"../../reducer/actions\";\nimport doOcr from \"../../lib/doOcr\";\nimport axios from \"axios\";\n\n\nexport interface Props {\n\tcurPageNo: int;\n\tfnSetCurZoom;\n\tdispatch: Dispatch<AppReducerAction>;\n\t\n}\n\nfunction ToolBar({ curPageno, dispatch, fnSetCurZoom }: Props) {\n\tconst parsed = queryString.parse(window.location.search);\n\tconst imageurl =\n\t\tprocess.env.REACT_APP_SERVER_URL +\n\t\t\"/i/b/\" +\n\t\tparsed?.b +\n\t\t\"/p/\" +\n\t\tcurPageno;\n\n\tconst hocrurl =\n\t\tprocess.env.REACT_APP_SERVER_URL +\n\t\t\"/h/b/\" +\n\t\tparsed?.b +\n\t\t\"/p/\" +\n\t\tcurPageno;\n\n\t\t\n\n\tconst handleChange = (e) => {\n\t\tconsole.log(\"handling page change +\" + imageurl);\n\t\tfetch(imageurl)\n\t\t\t.then((r) => r.blob())\n\t\t\t.then(async (blob) => {\n\t\t\t\tif (!blob.type.includes(\"image\")) return;\n\n\t\t\t\tconst pageImage = await loadImageUtil(blob);\n\n\t\t\t\tif (!pageImage) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//defaulting to 100% of div\n\n\t\t\t\tpageImage.curWidth = 0;\n\t\t\t\tpageImage.curHeight = 0;\n\t\t\t\tdispatch(loadImage(pageImage));\n\n\t\t\t\tconst page: HocrPage = await doOcr(hocrurl);\n\t\t\t\tdispatch(loadHocr(page));\n\t\t\t}).catch((error)=> console.log(error));\n\t};\n\n\tuseEffect(() => {\n\t\thandleChange();\n\t}, [curPageno]);\n\n\treturn (\n\t\t<div className=\"container-fluid pv-toolbar border\">\n\t\t\t<div className=\"row align-items-left shadow\">\n\t\t\t\t<div className=\"col pl-3\">\n\t\t\t\t\t<span className=\"pe-md-5\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclassName=\"btn btn-light toolbar-btn\"\n\t\t\t\t\t\t\ttitle=\"Toggle Side-pane Window\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\twidth=\"16\"\n\t\t\t\t\t\t\t\theight=\"16\"\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\tclassName=\"bi bi-layout-sidebar\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<path d=\"M0 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm5-1v12h9a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H5zM4 2H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2V2z\" />\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName=\"btn btn-light toolbar-btn px-2\"\n\t\t\t\t\t\ttitle=\"Previous Page\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif (curPageno - 1 > 0) {\n\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\tchangeCurPage(\n\t\t\t\t\t\t\t\t\t\tparseInt(\n\t\t\t\t\t\t\t\t\t\t\tcurPageno -\n\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" className=\"bi bi-arrow-left-circle-fill\" viewBox=\"0 0 16 16\">\n  <path d=\"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z\"/>\n</svg>\t\t\t</button>\n\n\t\t\t\t\t<span className=\"border-start border-2 h-100 rounded-pill\"></span>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName=\"btn btn-light toolbar-btn px-2\"\n\t\t\t\t\t\ttitle=\"Next Page\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif (curPageno + 1 > 0) {\n\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\tchangeCurPage(\n\t\t\t\t\t\t\t\t\t\tparseInt(\n\t\t\t\t\t\t\t\t\t\t\tcurPageno +\n\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" className=\"bi bi-arrow-right-circle-fill\" viewBox=\"0 0 16 16\">\n  <path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z\"/>\n</svg>\t\t\t\t</button>\n\t\t\t\t\t<span className=\"page-num\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={curPageno}\n\t\t\t\t\t\t\tclassName=\"well-shadow\"\n\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span className=\"border-0\">\n\t\t\t\t\t\t\tof 217\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName=\"btn btn-light toolbar-btn px-2\"\n\t\t\t\t\t\ttitle=\"Zoom-in\"\n\t\t\t\t\t\tonClick={()=>fnSetCurZoom(0.25)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\twidth=\"24\"\n\t\t\t\t\t\t\theight=\"24\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclassName=\"bi bi-zoom-in\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<path d=\"M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z\" />\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<span className=\"border-start border-2 h-100 rounded-pill\"></span>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclassName=\"btn btn-light toolbar-btn px-2\"\n\t\t\t\t\t\ttitle=\"Zoom-out\"\n\t\t\t\t\t\tonClick={()=>fnSetCurZoom(-0.25)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\twidth=\"24\"\n\t\t\t\t\t\t\theight=\"24\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\tclassName=\"bi bi-zoom-out\"\n\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<path d=\"M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z\" />\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default ToolBar;\n","import React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport { Stage, Layer, Image } from \"react-konva\";\nimport useImage from \"use-image\";\nimport PageImageInfo from \"../types\";\n\n// custom component that will handle loading image from url\n// you may add more logic here to handle \"loading\" state\n// or if loading is failed\n// VERY IMPORTANT NOTES:\n// at first we will set image state to null\n// and then we will set it to native image instance when it is loaded\n\n\nexport interface Props {\n\tpageImage: PageImage | null;\n\n}\n\n/* interface State {\n\timage: null;\n} */\n\nclass ImageView extends React.Component<Props, State> {\n\t/* state: State = {\n\t\timage: null,\n\t}; */\n\timage = null;\n\n\tcomponentDidUpdate(oldProps) {\n\t\tif (\n\t\t\toldProps.pageImage?.urlObject !==\n\t\t\tthis.props.pageImage?.urlObject\n\t\t) {\n\t\t\tthis.loadImage();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.image?.removeEventListener(\"load\", this.handleLoad);\n\t}\n\n\tloadImage() {\n\t\t// save to \"this\" to remove \"load\" handler on unmount\n\t\tthis.image = new window.Image();\n\t\tthis.image.src = this.props.pageImage?.urlObject;\n\t}\n\n\t/* handleLoad = () => {\n\t\t// after setState react-konva will update canvas and redraw the layer\n\t\t// because \"image\" property is changed\n\t\tthis.setState({\n\t\t\timage: this.image,\n\t\t});\n\t\t// if you keep same image object during source updates\n\t\t// you will have to update layer manually:\n\t\t// this.imageNode.getLayer().batchDraw();\n\t}; */\n\t\n\trender() {\n\t\treturn (\n\t\t\t<Image\n\t\t\t\timage={this.image}\n\t\t\t\tref={(node) => {\n\t\t\t\t\tthis.imageNode = node;\n\t\t\t\t}}\n\t\t\t\twidth={this.props.width}\n\t\t\t\theight={this.props.height}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImageView;\n","import HocrPage from \"../../types\";\nimport React, { Dispatch, useRef, useState } from \"react\";\nimport { useAppReducer } from \"../../../reducerContext\";\nimport { Layer, Image, Rect } from \"react-konva\";\nimport sortArray from \"sort-array\";\nimport { setHoverId } from \"../../../reducer/actions\";\n\nexport interface Props {\n\tpage: HocrPage | null;\n\tpageImage: PageImageInfo | null;\n\twidth: int;\n\theight: int;\n\tdispatch: Dispatch<AppReducerAction>;\n\thoverId: string;\n}\n\nexport default function HocrLayer({\n\tpage,\n\tpageImage,\n\twidth,\n\theight,\n\tdispatch,\n\thoverId,\n}: Props) {\n\tconst layerRectRefs = useRef([]);\n\n\tconst handleHover = (thoverId) => {\n\t\tdispatch(setHoverId(thoverId));\n\t};\n\tconst RenderWrdFunction = (\n\t\twordarray,\n\t\tpageImage,\n\t\twidth,\n\t\theight,\n\t\thoverId\n\t) => {\n\t\tif (!wordarray) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst wordsArray = sortArray(Array.from(wordarray), {\n\t\t\tby: \"area\",\n\t\t\torder: \"desc\",\n\t\t\tcomputed: {\n\t\t\t\tarea: (word) => {\n\t\t\t\t\t//console.log(word);\n\t\t\t\t\tif (word.bbox) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t(word.bbox.x1 -\n\t\t\t\t\t\t\t\tword.bbox.x0) *\n\t\t\t\t\t\t\t(word.bbox.y1 -\n\t\t\t\t\t\t\t\tword.bbox.y0)\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst wordsEl = wordsArray.map((lineChild) => (\n\t\t\t<Rect\n\t\t\t\tid={lineChild.id}\n\t\t\t\tref={(el) => {\n\t\t\t\t\tlayerRectRefs.current[lineChild.id] =\n\t\t\t\t\t\tel;\n\t\t\t\t}}\n\t\t\t\tclassName=\"ocr_lines\"\n\t\t\t\tkey={lineChild.id}\n\t\t\t\tx={parseInt(\n\t\t\t\t\t(lineChild.bbox?.x0 *\n\t\t\t\t\t\twidth) /\n\t\t\t\t\t\tpageImage?.orgWidth\n\t\t\t\t)}\n\t\t\t\ty={parseInt(\n\t\t\t\t\t(lineChild.bbox?.y0 *\n\t\t\t\t\t\theight) /\n\t\t\t\t\t\tpageImage?.orgHeight\n\t\t\t\t)}\n\t\t\t\twidth={\n\t\t\t\t\t((lineChild.bbox.x1 -\n\t\t\t\t\t\tlineChild.bbox.x0) *\n\t\t\t\t\t\twidth) /\n\t\t\t\t\tpageImage?.orgWidth\n\t\t\t\t}\n\t\t\t\theight={\n\t\t\t\t\t((lineChild.bbox.y1 -\n\t\t\t\t\t\tlineChild.bbox.y0) *\n\t\t\t\t\t\theight) /\n\t\t\t\t\tpageImage?.orgHeight\n\t\t\t\t}\n\t\t\t\tstroke=\"red\"\n\t\t\t\t//strokeEnabled={true}\n\t\t\t\tstrokeEnabled={(function () {\n\t\t\t\t\tif (hoverId === lineChild.id) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//\t\tconsole.log(hoverId);\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t})()}\n\t\t\t\tonMouseEnter={(e) => {\n\t\t\t\t\t//console.log(e);\n\t\t\t\t\thandleHover(e.target.attrs.id);\n\t\t\t\t}}\n\t\t\t\tonMouseLeave={(e) => {\n\t\t\t\t\thandleHover(\"\");\n\t\t\t\t}}\n\t\t\t/>\n\t\t));\n\n\t\treturn wordsEl;\n\t};\n\n\tif (page === null || pageImage === null) {\n\t\treturn <Layer></Layer>;\n\t}\n\tconst linesArray = sortArray(Array.from(page.children), {\n\t\tby: \"area\",\n\t\torder: \"desc\",\n\t\tcomputed: {\n\t\t\tarea: (word) => {\n\t\t\t\tif (word.bbox) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t(word.bbox.x1 - word.bbox.x0) *\n\t\t\t\t\t\t(word.bbox.y1 - word.bbox.y0)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t});\n\tconst linesEl = linesArray.map((lineChild) => (\n\t\t<React.Fragment>\n\t\t\t<Rect\n\t\t\t\tid={lineChild.id}\n\t\t\t\tref={(el) => {\n\t\t\t\t\tlayerRectRefs.current[lineChild.id] =\n\t\t\t\t\t\tel;\n\t\t\t\t}}\n\t\t\t\tclassName=\"ocr_lines\"\n\t\t\t\tkey={lineChild.id}\n\t\t\t\tx={parseInt(\n\t\t\t\t\t(lineChild.bbox?.x0 *\n\t\t\t\t\t\twidth) /\n\t\t\t\t\t\tpageImage?.orgWidth\n\t\t\t\t)}\n\t\t\t\ty={parseInt(\n\t\t\t\t\t(lineChild.bbox.y0 *\n\t\t\t\t\t\theight) /\n\t\t\t\t\t\tpageImage?.orgHeight\n\t\t\t\t)}\n\t\t\t\twidth={\n\t\t\t\t\t((lineChild.bbox.x1 -\n\t\t\t\t\t\tlineChild.bbox.x0) *\n\t\t\t\t\t\twidth) /\n\t\t\t\t\tpageImage?.orgWidth\n\t\t\t\t}\n\t\t\t\theight={\n\t\t\t\t\t((lineChild.bbox.y1 -\n\t\t\t\t\t\tlineChild.bbox.y0) *\n\t\t\t\t\t\theight) /\n\t\t\t\t\tpageImage?.orgHeight\n\t\t\t\t}\n\t\t\t/>\n\t\t\t{RenderWrdFunction(\n\t\t\t\tlineChild.children,\n\t\t\t\tpageImage,\n\t\t\t\twidth,\n\t\t\t\theight,\n\t\t\t\thoverId\n\t\t\t)}\n\t\t</React.Fragment>\n\t));\n\n\treturn <Layer>{linesEl}</Layer>;\n}\n","import Page from \"../../types\";\nimport \"./HocrView.css\";\nimport { Dispatch, useState} from \"react\";\nimport {setHoverId} from \"../../reducer/actions\";\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\n\nexport interface Props {\n\tpage: Page | null;\n\twidth: int;\n\theight: int;\n\thoverId: string;\n\tdispatch: Dispatch<AppReducerAction>;\n}\n\nfunction HocrView({ page, hoverId, dispatch }: Props) {\n\tconst [value, setValue] = useState('');\n\n\tif (page == null) {\n\t\treturn <div></div>;\n\t}\n\n\tconst RenderWord = (wordarray, hoverId) => {\n\t\tif (!wordarray) {\n\t\t\treturn;\n\t\t}\n\t\tconst handleHover = (thoverId) => {\n\t\t\tdispatch(setHoverId(thoverId));\n\t\t};\n\n\t\tconst WordsEl = wordarray.map((wordChild) => (\n\t\t\t<span\n\t\t\t\tclassName={`ocr_word ${\n\t\t\t\t\thoverId === wordChild.id ? \"hoved\" : \"\"\n\t\t\t\t}`}\n\t\t\t\tkey={wordChild.id}\n\t\t\t\tonMouseEnter={() => {\n\t\t\t\t\thandleHover(wordChild.id);\n\t\t\t\t\t//setHoverId(e.target.attrs.id)\n\t\t\t\t}}\n\t\t\t\tonMouseLeave={() => {\n\t\t\t\t\thandleHover(\"\");\n\t\t\t\t\t//setHoverId('');\n\t\t\t\t\t//e.target.strokeEnabled(false);\n\n\t\t\t\t\t//setPrevHoverId(e.target.attrs.id);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{wordChild.text}{\" \"}\n\t\t\t</span>\n\t\t));\n\t\treturn WordsEl;\n\t};\n\n\tconst linesEl = page.children.map((lineChild) => (\n\t\t<>\n\t\t\t<span className=\"ocr_line\" key={lineChild.id}>\n\t\t\t\t{RenderWord(lineChild.children, hoverId)}\n\t\t\t</span>\n\t\t\t<br />\n\t\t</>\n\t));\n\treturn (\n\t\t<div>\n\t\t<p>{linesEl}</p>\n\t\t</div>\n\t);\n}\n\nexport default HocrView;\n","import ToolBar from \"./ToolBar\";\nimport { Stage, Layer, Text, Line } from \"react-konva\";\nimport { useMeasure } from \"react-use\";\nimport React, { useState, useEffect, useLayoutEffect } from \"react\";\nimport ImageView from \"./ImageView\";\nimport { useAppReducer } from \"../../reducerContext\";\nimport { Link } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { loadImageUtil } from \"../../utils\";\nimport {Button,ButtonGroup, Nav, Navbar, Container} from \"react-bootstrap\";\nimport {\n\tloadImage,\n\tloadHocr,\n\tlogInfo,\n\tchangeCurPage,\n} from \"../../reducer/actions\";\nimport doOcr from \"../../lib/doOcr\";\nimport HocrLayer from \"./components/HocrLayer\";\nimport HocrView from \"./HocrView\";\nimport axios from \"axios\";\nimport \"./PageView.css\"\n\nfunction PageViewer() {\n\tconst [state, dispatch] = useAppReducer();\n\tconst parsed = queryString.parse(window.location.search);\n\tconst [curZoom, setCurZoom] = useState(1);\n\tconst [bookDetails, setBookDetails] = useState(null);\n\n\tconst handleZoom = (zoomDelta: int) => {\n\t\tsetCurZoom(curZoom + zoomDelta);\n\t};\n\n\t\n\tconst [imgMeasureRef, { width, height }] = useMeasure();\n\n\tuseEffect(() => {\n\t\tif (!parsed?.p) {\n\t\t\tparsed.p = \"1\";\n\t\t}\n\t\tif (parsed?.b) {\n\t\t\t\t\n\t\taxios.get(\n\t\t\tprocess.env.REACT_APP_SERVER_URL + \"/books/\" + parsed.b\n\t\t).then((response) => setBookDetails(response.data)).catch((error)=> console.log(error));\n\t}\n\n\t\tdispatch(changeCurPage(parseInt(parsed.p)));\n\t\t//uu10.129.6.78:5000/h/b/1/p/2\n\t\t/* const imageurl =\n\t\t\tprocess.env.REACT_APP_SERVER_URL +\n\t\t\t\"/i/b/\" +\n\t\t\tparsed?.b +\n\t\t\t\"/p/\" +\n\t\t\tparsed?.p; */\n\n\t\t//\tif (!state.pageImage) {\n\t\t//\t}\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"background\">\n\t\t\t\t<div className=\"container-fluid py-0\">\n\t\t\t\t\t{/* <Link\n\t\t\t\t\t\tclassName=\"navbar-brand\"\n\t\t\t\t\t\tto=\"/cli\"> */}\n\t\t\t\t\t\t{/* <span className=\"px-2\">\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\twidth=\"42\"\n\t\t\t\t\t\t\t\theight=\"42\"\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\tclassName=\"bi bi-arrow-left-circle\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\td=\"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span> */}\n\t\t\t\t\t\t\t<div className=\"head\">\n\t\t\t\t\t\t\t\t<Navbar bg=\"blue\" variant=\"dark\">\n\t\t\t\t\t\t\t\t<Container>\n\t\t\t\t\t\t\t\t<Nav className=\"head\">\n\t\t\t\t\t\t\t\t<Nav.Link href=\"#file\">File</Nav.Link>\n\t\t\t\t\t\t\t\t<Nav.Link href=\"#edit\">Edit</Nav.Link>\n\t\t\t\t\t\t\t\t<Nav.Link href=\"#language\">Language</Nav.Link>\n\t\t\t\t\t\t\t\t<Nav.Link href=\"#reports\">Reports</Nav.Link>\n\t\t\t\t\t\t\t\t<Nav.Link href=\"#version\">Version</Nav.Link>\n\t\t\t\t\t\t\t\t<Nav.Link href=\"#download\">Download</Nav.Link>\n\t\t\t\t\t\t\t\t<Nav.Link href=\"#help\">Help</Nav.Link>\n\t\t\t\t\t\t\t\t</Nav>\n\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t</Navbar>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div className=\"text-format\">\n\t\t\t\t\t\t\t<button className=\"button icon1\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon2\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon3\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon4\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon5\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon6\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon7\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon8\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon9\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon10\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon11\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon12\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon13\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon14\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon15\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon16\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon17\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon18\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon19\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon20\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon21\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon22\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon23\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon24\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon25\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon26\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon27\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon28\">icon</button>\n\t\t\t\t\t\t\t<button className=\"button icon29\">icon</button>\n\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"format-options-background\">\n\t\t\t\t\t\t\t\t{/*<ButtonGroup aria-label=\"Basic example\">\n\t\t\t\t\t\t\t\t<Button className=\"button\" variant=\"secondary\">Resize Image</Button>\n\t\t\t\t\t\t\t\t<Button className=\"button\" variant=\"secondary\">Mark Regions</Button>\n\t\t\t\t\t\t\t\t<Button className=\"button\" variant=\"secondary\">Comments Accuracy</Button>\n\t\t\t\t\t\t\t\t<Button className=\"button\" variant=\"secondary\">Compare Character Output</Button>\t\t\n\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<button className=\"text-format-option icon1\">Resize Image</button>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<button className=\"text-format-option icon2\">Mark Regions</button>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<button className=\"text-format-option icon3\">Comments Accuracy</button>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<button className=\"text-format-option icon3\">Compare Character Output</button>\n\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t{/* </Link> */}\n\t\t\t\t\t{/* <span className=\"navbar-text px-3 me-auto\">\n\t\t\t\t\t\t{bookDetails?.title}\n\t\t\t\t\t</span> */}\n\t\t\t\t\n\n\t\t\t\n\t\t\t<div className=\"container-fluid pv-container pt-2 pb-4 px-2\">\n\t\t\t\t<div className=\"row wh-90 vh-100 border shadow\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"col-md-6 shadow\"\n\t\t\t\t\t\tref={imgMeasureRef}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"p-3 border pv-pane\">\n\t\t\t\t\t\t\t<Stage\n\t\t\t\t\t\t\t\twidth={\n\t\t\t\t\t\t\t\t\t(state\n\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t?.curWidth !==\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t? state\n\t\t\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t\t\t?.curWidth\n\t\t\t\t\t\t\t\t\t\t: width) *\n\t\t\t\t\t\t\t\t\tcurZoom\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\theight={\n\t\t\t\t\t\t\t\t\t(state\n\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t?.curHeight !==\n\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t? state\n\t\t\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t\t\t?.curHeight\n\t\t\t\t\t\t\t\t\t\t: height) *\n\t\t\t\t\t\t\t\t\tcurZoom\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{!state.pageImage && (\n\t\t\t\t\t\t\t\t\t<Layer>\n\t\t\t\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\t\t\t\ttext={\n\t\t\t\t\t\t\t\t\t\t\t\tstate\n\t\t\t\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t\t\t\t?.urlObject\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Layer>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<Layer>\n\t\t\t\t\t\t\t\t\t<ImageView\n\t\t\t\t\t\t\t\t\t\tpageImage={\n\t\t\t\t\t\t\t\t\t\t\tstate.pageImage\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twidth={\n\t\t\t\t\t\t\t\t\t\t\t(state\n\t\t\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t\t\t?.curWidth !==\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\t\t? state\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.curWidth\n\t\t\t\t\t\t\t\t\t\t\t\t: width) *\n\t\t\t\t\t\t\t\t\t\t\tcurZoom\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\theight={\n\t\t\t\t\t\t\t\t\t\t\t(state\n\t\t\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t\t\t?.curHeight !==\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\t\t? state\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.curHeight\n\t\t\t\t\t\t\t\t\t\t\t\t: height) *\n\t\t\t\t\t\t\t\t\t\t\tcurZoom\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Layer>\n\t\t\t\t\t\t\t\t<HocrLayer\n\t\t\t\t\t\t\t\t\tpage={\n\t\t\t\t\t\t\t\t\t\tstate.hocrPage\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdispatch={\n\t\t\t\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tpageImage={\n\t\t\t\t\t\t\t\t\t\tstate.pageImage\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\twidth={\n\t\t\t\t\t\t\t\t\t\t(state\n\t\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t\t?.curWidth !==\n\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\t? state\n\t\t\t\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t\t\t\t?.curWidth\n\t\t\t\t\t\t\t\t\t\t\t: width) *\n\t\t\t\t\t\t\t\t\t\tcurZoom\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\theight={\n\t\t\t\t\t\t\t\t\t\t(state\n\t\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t\t?.curHeight !==\n\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\t? state\n\t\t\t\t\t\t\t\t\t\t\t\t\t.pageImage\n\t\t\t\t\t\t\t\t\t\t\t\t\t?.curHeight\n\t\t\t\t\t\t\t\t\t\t\t: height) *\n\t\t\t\t\t\t\t\t\t\tcurZoom\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thoverId={\n\t\t\t\t\t\t\t\t\t\tstate.hoverId\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Stage>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-md-6 shadow\">\n\t\t\t\t\t\t<div className=\"p-3 border pv-pane\">\n\t\t\t\t\t\t\t<HocrView\n\t\t\t\t\t\t\t\tpage={\n\t\t\t\t\t\t\t\t\tstate.hocrPage\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thoverId={\n\t\t\t\t\t\t\t\t\tstate.hoverId\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdispatch={\n\t\t\t\t\t\t\t\t\tdispatch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row fixed-bottom\">\n\t\t\t\t<ToolBar\n\t\t\t\tcurPageno={state.curPageno}\n\t\t\t\tdispatch={dispatch}\n\t\t\t\tfnSetCurZoom={handleZoom}\n\t\t\t\t/>\n\t\t\t\t\t<div className=\"col-md-6 offset-md-4 px-3\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t{state.logInfo}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div> \n\t\t\t\n\t\t\n\t\t\n\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default PageViewer;\n","import Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Form from \"react-bootstrap/Form\";\nimport Alert from \"react-bootstrap/Alert\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nfunction BooksCatalog() {\n\tconst [show, setShow] = useState(false);\n\tconst [showAlert, setShowAlert] = useState(false);\n\n\tconst [inputValues, setInputValues] = useState({});\n\tconst [onlineBookList, setOnlineBookList] = useState([]);\n\tconst [alertMessage, setAlertMessage] = useState({});\n\n\tconst form = useRef(null);\n\tconst handleClose = () => setShow(false);\n\tconst handleShow = () => setShow(true);\n\n\tconst refreshBookList = () => {\n\t\tconst listBookUrl = process.env.REACT_APP_SERVER_URL + \"/books\";\n\t\taxios.get(listBookUrl)\n\t\t\t.then((response) => {\n\t\t\t\tsetOnlineBookList(response.data);\n\t\t\t})\n\t\t\t.catch((er) => {\n\t\t\t\tsetAlertMessage({\n\t\t\t\t\tmsg: er.response.data,\n\t\t\t\t\tvariant: \"danger\",\n\t\t\t\t});\n\t\t\t\tsetShowAlert(true);\n\t\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\trefreshBookList();\n\t}, []);\n\tconst booksList = [\n\t\t{\n\t\t\t_id: { $oid: \"60e72548f67de168a975542a\" },\n\t\t\ttitle: \"Sukra Neeti Sara\",\n\t\t\tauthor: \"A Author\",\n\t\t\tfullpath: \"/path/to/book/pdf\",\n\t\t},\n\t\t{\n\t\t\t_id: { $oid: \"60e2cd9237ca51041bc241de\" },\n\t\t\ttitle: \"Sukra Neeti Sara\",\n\t\t\tauthor: \"A Author\",\n\t\t\tfullpath: \"/path/to/book/pdf\",\n\t\t},\n\t\t{\n\t\t\t_id: { $oid: \"60e2cf76b7873293bb9ba1ed\" },\n\t\t\ttitle: \"Vara 68\",\n\t\t\tauthor: \"A Author\",\n\t\t\tfullpath: \"/path/to/pdf\",\n\t\t},\n\t\t{\n\t\t\t_id: { $oid: \"60e2d0b5b7873293bb9ba1ee\" },\n\t\t\ttitle: \"Vara 68 and 86\",\n\t\t\tauthor: \"A Author\",\n\t\t\tfullpath: \"/path/to/pdf\",\n\t\t},\n\t];\n\n\tconst trItem = onlineBookList.map((bookItem, index) => (\n\t\t<tr key={bookItem._id.$uuid}>\n\t\t\t<th>{index + 1}</th>\n\t\t\t<td>{bookItem.title}</td>\n\t\t\t<td>{bookItem.author}</td>\n\t\t\t<td>{bookItem.category}</td>\n\t\t\t<td>\n\t\t\t\t<Link\n\t\t\t\t\tto={\n\t\t\t\t\t\t\"/cli/pageview?b=\" +\n\t\t\t\t\t\tbookItem._id.$uuid\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\tView Book\n\t\t\t\t</Link>\n\t\t\t</td>\n\t\t</tr>\n\t));\n\n\tconst handleInputChange = (event) => {\n\t\tconst target = event.target;\n\t\tconst value =\n\t\t\ttarget.type === \"checkbox\"\n\t\t\t\t? target.checked\n\t\t\t\t: target.value;\n\t\tconst name = target.id;\n\t\tlet shallow = Object.assign({}, inputValues);\n\t\tshallow[name] = value;\n\t\tsetInputValues(shallow);\n\t};\n\n\tconst handleBookSubmit = (e) => {\n\t\te.preventDefault();\n\t\tconst frmData = new FormData(form.current);\n\t\tconst addBookUrl = process.env.REACT_APP_SERVER_URL + \"/books\";\n\t\tconst config = {\n\t\t\theaders: {\n\t\t\t\t\"content-type\": \"multipart/form-data\",\n\t\t\t},\n\t\t};\n\t\taxios.post(addBookUrl, frmData, config)\n\t\t\t.then((response) => {\n\t\t\t\t//console.log(response);\n\t\t\t\tsetAlertMessage({\n\t\t\t\t\tmsg: \"Successfully saved the book to the SandHI catalog\",\n\t\t\t\t\tvariant: \"success\",\n\t\t\t\t});\n\t\t\t\tsetShowAlert(true);\n\t\t\t\trefreshBookList();\n\t\t\t})\n\t\t\t.catch((er) => {\n\t\t\t\tsetAlertMessage({\n\t\t\t\t\tmsg: er.response?.data,\n\t\t\t\t\tvariant: \"danger\",\n\t\t\t\t});\n\t\t\t\tsetShowAlert(true);\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Modal\n\t\t\t\tshow={show}\n\t\t\t\tonHide={handleClose}\n\t\t\t\tanimation={false}\n\t\t\t>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>\n\t\t\t\t\t\tAdd a book to SandHI catalog\n\t\t\t\t\t\tusing this form\n\t\t\t\t\t</Modal.Title>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<Form\n\t\t\t\t\t\tref={form}\n\t\t\t\t\t\tonSubmit={handleBookSubmit}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t<Form.Label>\n\t\t\t\t\t\t\t\tBook Title\n\t\t\t\t\t\t\t</Form.Label>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"Enter Book Title\"\n\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\thandleInputChange\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tid=\"title\"\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t<Form.Label>\n\t\t\t\t\t\t\t\tAuthor of the\n\t\t\t\t\t\t\t\tbook\n\t\t\t\t\t\t\t</Form.Label>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"Enter name of the Author\"\n\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\thandleInputChange\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tid=\"author\"\n\t\t\t\t\t\t\t\tname=\"author\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t<Form.Label>\n\t\t\t\t\t\t\t\tCategory\n\t\t\t\t\t\t\t</Form.Label>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\tas=\"select\"\n\t\t\t\t\t\t\t\tid=\"category\"\n\t\t\t\t\t\t\t\tname=\"category\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<option value=\"general\">\n\t\t\t\t\t\t\t\t\tGeneral\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t<option value=\"ganitha\">\n\t\t\t\t\t\t\t\t\tGanitha\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t<option value=\"philosophy\">\n\t\t\t\t\t\t\t\t\tPhilosophy\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t<option value=\"article\">\n\t\t\t\t\t\t\t\t\tArticle\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t</Form.Control>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t<Form.Label>\n\t\t\t\t\t\t\t\tNumber of pages\n\t\t\t\t\t\t\t</Form.Label>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tplaceholder=\"Number of pages\"\n\t\t\t\t\t\t\t\tid=\"noofpages\"\n\t\t\t\t\t\t\t\tname=\"noofpages\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t<Form.Label>\n\t\t\t\t\t\t\t\tPdf File of the\n\t\t\t\t\t\t\t\tbook\n\t\t\t\t\t\t\t</Form.Label>\n\n\t\t\t\t\t\t\t<Form.File\n\t\t\t\t\t\t\t\tid=\"uploaded_file\"\n\t\t\t\t\t\t\t\tname=\"uploaded_file\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Alert\n\t\t\t\t\t\t\tvariant=\"danger\"\n\t\t\t\t\t\t\tonClose={() =>\n\t\t\t\t\t\t\t\tsetShowAlert(\n\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdismissible\n\t\t\t\t\t\t\tshow={showAlert}\n\t\t\t\t\t\t\tvariant={\n\t\t\t\t\t\t\t\talertMessage?.variant\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{alertMessage?.msg}\n\t\t\t\t\t\t</Alert>\n\t\t\t\t\t</Form>\n\t\t\t\t</Modal.Body>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t>\n\t\t\t\t\t\tClose\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col\">\n\t\t\t\t\t\t<table className=\"table table-striped\">\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t\t\t#\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t\t\tTitle\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t\t\tAuthor\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t\t\tCategory\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<th scope=\"col\">\n\t\t\t\t\t\t\t\t\t\tLink\n\t\t\t\t\t\t\t\t\t\tto\n\t\t\t\t\t\t\t\t\t\tthe\n\t\t\t\t\t\t\t\t\t\tbook\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\tcolSpan={\n\t\t\t\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Link to=\"/cli/search\">\n\t\t\t\t\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\t\t\t\t\tSearch\n\t\t\t\t\t\t\t\t\t\t\tthe\n\t\t\t\t\t\t\t\t\t\t\tCatalog\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t\t\t\t{trItem}\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\tcolSpan={\n\t\t\t\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\t\t\thandleShow\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t\t\t\t\ta\n\t\t\t\t\t\t\t\t\t\t\tbook\n\t\t\t\t\t\t\t\t\t\t\tto\n\t\t\t\t\t\t\t\t\t\t\tthe\n\t\t\t\t\t\t\t\t\t\t\tCatalog\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\nexport default BooksCatalog;\n","import \"./SearchPage.css\";\nimport { Link } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport Alert from \"react-bootstrap/Alert\";\nimport axios from \"axios\";\n\nexport default function SearchPage() {\n\tconst [searchQuery, setSearchQuery] = useState(\"\");\n\tconst [alertMessage, setAlertMessage] = useState({});\n\tconst [showAlert, setShowAlert] = useState(false);\n\tconst [searchResults, setSearchResults] = useState({});\n\n\tconst searchResultsDiv = searchResults?.response?.docs.map(\n\t\t(bookItem, index) => (\n\t\t\t<div\n\t\t\t\tclassName=\"card col-12 col-md-9 border-0 pt-4\"\n\t\t\t\tkey={bookItem.id}\n\t\t\t>\n\t\t\t\t<Link\n\t\t\t\t\tto={\n\t\t\t\t\t\t\"/cli/pageview?b=\" +\n\t\t\t\t\t\tbookItem.bookuuid +\n\t\t\t\t\t\t\"&p=\" +\n\t\t\t\t\t\tbookItem.pageno\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"card-link stretched-link\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t>\n\t\t\t\t\t{process.env.REACT_APP_SERVER_URL +\n\t\t\t\t\t\t\"/cli/pageview?b=\" +\n\t\t\t\t\t\tbookItem.bookuuid +\n\t\t\t\t\t\t\"&p=\" +\n\t\t\t\t\t\tbookItem.pageno}\n\t\t\t\t</Link>\n\t\t\t\t<div className=\"card-title pt-2 inline-headers\">\n\t\t\t\t\t<h5>{bookItem?.title}</h5>\n\t\t\t\t\t<span className=\"badge bg-light text-dark rounded-pill\">\n\t\t\t\t\t\t{\"Page \" + bookItem.pageno}\n\t\t\t\t\t</span>\n\t\t\t\t\t<h6 className=\"card-subtitle mb-2 text-muted\">\n\t\t\t\t\t\t{bookItem.author}\n\t\t\t\t\t</h6>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"card-body p-0 m-0 text-muted d-inline-block text-truncate\"\n\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t__html: searchResults[\n\t\t\t\t\t\t\t\"highlighting\"\n\t\t\t\t\t\t][bookItem.id]?.pagecontent[0],\n\t\t\t\t\t}}\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t)\n\t);\n\n\tconst refreshSearchResults = async (qvalue) => {\n\t\tconst queryURL =\n\t\t\tprocess.env.REACT_APP_SERVER_URL + \"/s/\" + qvalue;\n\t\tawait axios\n\t\t\t.get(queryURL)\n\t\t\t.then((response) => {\n\t\t\t\tsetSearchResults(response.data);\n\t\t\t})\n\t\t\t.catch((er) => {\n\t\t\t\tif (er.response) {\n\t\t\t\t\tsetAlertMessage({\n\t\t\t\t\t\tmsg: er.response?.data,\n\t\t\t\t\t\tvariant: \"danger\",\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsetAlertMessage({\n\t\t\t\t\t\tmsg: \"Unkown errro in server\",\n\t\t\t\t\t\tvariant: \"danger\",\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsetShowAlert(true);\n\t\t\t});\n\t};\n\n\tconst handleInputChange = (event) => {\n\t\tif (event.key === \"Enter\") {\n\t\t\trefreshSearchResults(event.target.value);\n\t\t\tconsole.log(searchResultsDiv);\n\t\t\treturn;\n\t\t} else {\n\t\t\tsetSearchQuery(event.target.value);\n\t\t}\n\t};\n\treturn (\n\t\t<>\n\t\t\t<div className=\"container-fluid px-5 pt-5\">\n\t\t\t\t<div className=\"row align-items-center shadow p-2\">\n\t\t\t\t\t<Link to=\"/cli\">back to Catalog</Link>\n\t\t\t\t\t<div className=\"col-12 col-md-4 col-lg-2\">\n\t\t\t\t\t\t<p className=\"h1\">Sandhi</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-12 col-md-8 col-lg-8\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\t\t\tid=\"exampleFormControlInput1\"\n\t\t\t\t\t\t\tplaceholder=\"enter your search string\"\n\t\t\t\t\t\t\tonKeyDown={\n\t\t\t\t\t\t\t\thandleInputChange\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Alert\n\t\t\t\t\t\tvariant=\"danger\"\n\t\t\t\t\t\tonClose={() =>\n\t\t\t\t\t\t\tsetShowAlert(false)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdismissible\n\t\t\t\t\t\tshow={showAlert}\n\t\t\t\t\t\tvariant={alertMessage?.variant}\n\t\t\t\t\t>\n\t\t\t\t\t\t{alertMessage?.msg}\n\t\t\t\t\t</Alert>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"container-fluid p-0 m-0\">\n\t\t\t\t<hr />\n\t\t\t</div>\n\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"col-12 col-md-4\"\n\t\t\t\t\t\tshow={searchResults?.response}\n\t\t\t\t\t>\n\t\t\t\t\t\t<h6 className=\"text-muted\">\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchResults\n\t\t\t\t\t\t\t\t\t?.response\n\t\t\t\t\t\t\t\t\t?.numFound\n\t\t\t\t\t\t\t}{\" \"}\n\t\t\t\t\t\t\tresults in {searchResults?.responseHeader?.QTime+\" \"}\n\t\t\t\t\t\t\tmilliseconds\n\t\t\t\t\t\t</h6>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row border shadow-lg pb-4\">\n\t\t\t\t\t{searchResultsDiv}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport { useEffect, useState } from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport { useAppReducer } from \"./reducerContext\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport PageViewer from \"./components/PageView/PageView\";\nimport BooksCatalog from \"./components/BooksCatalog\";\nimport SearchPage from \"./components/SearchPage\";\n\nfunction App() {\n\tconst [state, dispatch] = useAppReducer();\n\tconst location = window.location.href;\n\n\tlet params = location.split(\"?\");\n\tlet bookid = \"\";\n\tif (params.length > 1) {\n\t\tbookid = location.split(\"?\")[1].split(\"&\")[0];\n\t}\n\n\treturn (\n\t\t<Router>\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/cli/search\">\n\t\t\t\t\t<SearchPage />\n\t\t\t\t</Route>\n\n\t\t\t\t<Route exact path=\"/cli\">\n\t\t\t\t\t<nav className=\"navbar navbar-dark bg-primary navbar-expand-md shadow-sm rounded p-0 m-0\">\n\t\t\t\t\t\t<div className=\"container-fluid py-0\">\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tclassName=\"navbar-brand\"\n\t\t\t\t\t\t\t\tto=\"/cli\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSandHI\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<span className=\"navbar-text px-3 me-auto\">\n\t\t\t\t\t\t\t\tBooks Catalog\n\t\t\t\t\t\t\t\tList\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</nav>\n\n\t\t\t\t\t<BooksCatalog />\n\t\t\t\t</Route>\n\t\t\t\t<Route exact path=\"/cli/pageview\">\n\t\t\t\t\t<PageViewer />\n\t\t\t\t</Route>\n\t\t\t</Switch>\n\t\t</Router>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { AppReducerProvider } from \"./reducerContext\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<AppReducerProvider>\n\t\t\t<App />\n\t\t</AppReducerProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}